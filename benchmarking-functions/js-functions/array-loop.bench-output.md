# Array Loops

- reduce works for smaller array lenghts, but is the worst above 10K elements

## Benchmark

### System Details

```text
  Model Name: MacBook Pro
  Model Identifier: Mac15,3
  Model Number: Z1C8000JUHN/A
  Chip: Apple M3
  Total Number of Cores: 8 (4 performance and 4 efficiency)
  Memory: 16 GB
```

### Benchmark Results

#### Sum(10 items)

| Name              | Hz            | Min    | Max    | Mean   | P75    | P99    | P995   | P999   | RME    | Samples  |         |
| ----------------- | ------------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | -------- | ------- |
| standard for loop | 29,096,061.48 | 0.0000 | 0.1346 | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.0001 | ±0.15% | 14548031 |         |
| for of loop       | 27,569,210.51 | 0.0000 | 0.2325 | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.0001 | ±0.18% | 13784606 |         |
| forEach loop      | 26,710,145.15 | 0.0000 | 0.4888 | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.0001 | ±0.38% | 13355073 | slowest |
| reduce loop       | 30,041,899.88 | 0.0000 | 0.1992 | 0.0000 | 0.0000 | 0.0000 | 0.0000 | 0.0001 | ±0.20% | 15020950 | fastest |

#### Sum(100 items)

| Name              | Hz            | Min    | Max    | Mean   | P75    | P99    | P995   | P999   | RME    | Samples |         |
| ----------------- | ------------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| standard for loop | 13,474,465.08 | 0.0000 | 0.4587 | 0.0001 | 0.0001 | 0.0001 | 0.0001 | 0.0002 | ±0.48% | 6737233 |         |
| for of loop       | 11,839,895.22 | 0.0000 | 0.2895 | 0.0001 | 0.0001 | 0.0001 | 0.0001 | 0.0002 | ±0.34% | 5919948 |         |
| forEach loop      | 9,722,783.96  | 0.0000 | 0.0291 | 0.0001 | 0.0001 | 0.0001 | 0.0001 | 0.0002 | ±0.04% | 4861392 | slowest |
| reduce loop       | 15,343,612.86 | 0.0000 | 0.1003 | 0.0001 | 0.0001 | 0.0001 | 0.0001 | 0.0001 | ±0.10% | 7671807 | fastest |

#### Sum(1000 items)

| Name              | Hz           | Min    | Max    | Mean   | P75    | P99    | P995   | P999   | RME    | Samples |         |
| ----------------- | ------------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| standard for loop | 2,220,860.09 | 0.0004 | 0.1448 | 0.0005 | 0.0005 | 0.0005 | 0.0005 | 0.0006 | ±0.08% | 1110431 |         |
| for of loop       | 1,230,777.93 | 0.0005 | 4.5994 | 0.0008 | 0.0006 | 0.0011 | 0.0011 | 0.0140 | ±4.35% | 615389  |         |
| forEach loop      | 1,207,917.93 | 0.0007 | 0.0476 | 0.0008 | 0.0008 | 0.0010 | 0.0010 | 0.0011 | ±0.05% | 603959  | slowest |
| reduce loop       | 2,612,611.11 | 0.0003 | 0.3092 | 0.0004 | 0.0004 | 0.0005 | 0.0005 | 0.0010 | ±0.20% | 1306306 | fastest |

#### Sum(10000 items)

| Name              | Hz         | Min    | Max     | Mean   | P75    | P99    | P995   | P999   | RME    | Samples |         |
| ----------------- | ---------- | ------ | ------- | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| standard for loop | 228,906.35 | 0.0038 | 12.4219 | 0.0044 | 0.0042 | 0.0052 | 0.0087 | 0.0210 | ±4.87% | 114454  |         |
| for of loop       | 185,554.63 | 0.0049 | 0.0529  | 0.0054 | 0.0054 | 0.0063 | 0.0087 | 0.0124 | ±0.07% | 92778   |         |
| forEach loop      | 123,082.49 | 0.0074 | 0.1280  | 0.0081 | 0.0080 | 0.0115 | 0.0133 | 0.0317 | ±0.17% | 61542   | slowest |
| reduce loop       | 280,876.76 | 0.0031 | 0.8519  | 0.0036 | 0.0035 | 0.0042 | 0.0089 | 0.0191 | ±0.58% | 140439  | fastest |

#### Sum(100000 items)

| Name              | Hz        | Min    | Max    | Mean   | P75    | P99    | P995   | P999   | RME    | Samples |         |
| ----------------- | --------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| standard for loop | 14,061.60 | 0.0639 | 2.7952 | 0.0711 | 0.0688 | 0.1241 | 0.1502 | 0.3034 | ±1.28% | 7031    |         |
| for of loop       | 15,096.87 | 0.0598 | 0.1057 | 0.0662 | 0.0667 | 0.0730 | 0.0745 | 0.0785 | ±0.06% | 7549    | fastest |
| forEach loop      | 1,798.44  | 0.5249 | 0.7299 | 0.5560 | 0.5551 | 0.6210 | 0.6430 | 0.7299 | ±0.18% | 900     |         |
| reduce loop       | 1,493.09  | 0.6177 | 0.7758 | 0.6698 | 0.6710 | 0.7409 | 0.7483 | 0.7758 | ±0.15% | 747     | slowest |

#### Sum(1000000 items)

| Name              | Hz       | Min    | Max    | Mean   | P75    | P99    | P995   | P999   | RME    | Samples |         |
| ----------------- | -------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------- | ------- |
| standard for loop | 1,453.61 | 0.6397 | 0.7267 | 0.6879 | 0.6904 | 0.7090 | 0.7178 | 0.7267 | ±0.10% | 727     |         |
| for of loop       | 1,508.97 | 0.6155 | 0.6967 | 0.6627 | 0.6647 | 0.6817 | 0.6840 | 0.6967 | ±0.07% | 755     | fastest |
| forEach loop      | 193.48   | 5.0704 | 5.3869 | 5.1686 | 5.1970 | 5.3869 | 5.3869 | 5.3869 | ±0.27% | 97      |         |
| reduce loop       | 180.74   | 5.4351 | 6.2476 | 5.5328 | 5.5092 | 6.2476 | 6.2476 | 6.2476 | ±0.52% | 91      | slowest |

## Benchmark Summary

### Relative to Standard For Loop (1x)

| Loop Type         | 10 items | 100 items | 1000 items | 10000 items | 100000 items | 1000000 items |
| ----------------- | -------- | --------- | ---------- | ----------- | ------------ | ------------- |
| reduce loop       | 1.03x    | 1.14x     | 1.18x      | 1.23x       | 0.10x        | 0.12x         |
| standard for loop | 1.00x    | 1.00x     | 1.00x      | 1.00x       | 1.00x        | 1.00x         |
| for of loop       | 0.95x    | 0.88x     | 0.55x      | 0.81x       | 1.07x        | 1.04x         |
| forEach loop      | 0.92x    | 0.72x     | 0.54x      | 0.54x       | 0.13x        | 0.13x         |

### Relative to Fastest Method

| Loop Type         | 10 items | 100 items | 1000 items | 10000 items | 100000 items | 1000000 items |
| ----------------- | -------- | --------- | ---------- | ----------- | ------------ | ------------- |
| reduce loop       | 1.00x    | 1.00x     | 1.00x      | 1.00x       | 0.10x        | 0.12x         |
| standard for loop | 0.97x    | 0.88x     | 0.85x      | 0.81x       | 0.95x        | 0.96x         |
| for of loop       | 0.92x    | 0.77x     | 0.47x      | 0.66x       | 1.00x        | 1.00x         |
| forEach loop      | 0.89x    | 0.63x     | 0.46x      | 0.44x       | 0.12x        | 0.12x         |

### Relative to Slowest Method

| Loop Type         | 10 items | 100 items | 1000 items | 10000 items | 100000 items | 1000000 items |
| ----------------- | -------- | --------- | ---------- | ----------- | ------------ | ------------- |
| reduce loop       | 1.12x    | 1.58x     | 2.16x      | 2.28x       | 1.00x        | 1.00x         |
| standard for loop | 1.09x    | 1.39x     | 1.84x      | 1.89x       | 7.82x        | 7.51x         |
| for of loop       | 1.03x    | 1.22x     | 1.02x      | 1.51x       | 8.39x        | 8.35x         |
| forEach loop      | 1.00x    | 1.00x     | 1.00x      | 1.00x       | 1.20x        | 1.12x         |
